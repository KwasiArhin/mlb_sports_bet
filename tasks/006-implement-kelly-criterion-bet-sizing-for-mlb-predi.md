## TASK-006
---
STATUS: DONE

**Generated:** 2025-08-31 13:50:49
**Original Requirements:** implement Kelly Criterion bet sizing for MLB predictions

Implement `calculate_kelly_bet_size` with the following contract:

### Input Parameters:
  - win_probability: float
  - decimal_odds: float
  - bankroll: float
  - max_bet_fraction: float = 0.25

### Output:
- Returns: float

### Preconditions:
  - 0.0 < win_probability < 1.0
  - decimal_odds > 1.0
  - bankroll > 0.0
  - 0.0 < max_bet_fraction <= 1.0

### Postconditions:
  - 0.0 <= result <= bankroll * max_bet_fraction
  - Result is 0.0 when Kelly criterion is negative
  - Result respects maximum bet fraction limit

### Invariants:
  - Function is pure and stateless
  - Memory usage is bounded

### Error Handling:
  - Timeout after 30 seconds
  - Memory limit exceeded
  - Invalid configuration parameters

### Performance:
- Complexity: O(n)

### Thread Safety:
- Function is thread-safe

### Implementation Requirements:
- Generate the implementation with comprehensive error handling
- Include docstring with examples
- Add type hints for all parameters and return values
- Follow YAGNI principles - implement only what's needed
- Use appropriate design patterns for the problem domain

### Test Cases That MUST Pass:
1. calculate_kelly_bet_size(0.6, 2.0, 1000.0) returns positive bet size
2. calculate_kelly_bet_size(0.4, 2.0, 1000.0) returns 0.0 (negative edge)
3. calculate_kelly_bet_size(0.8, 1.5, 1000.0) respects max_bet_fraction

### Dependencies:
- numpy>=1.21.0

### Additional Notes:
- Follow standard Python best practices

---
**Generated by PromptPatternGenerator v1.0**
